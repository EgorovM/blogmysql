{% extends 'main/base.html' %}

{% block content %}
<div class="container" style='margin-top: 70px'>
  <div class="container-fluid flex-grow-1 container-p-y">
    <h4 class="font-weight-bold py-3 mb-4">
      Редактирование статьи <a href="/article/{{article.id}}"><span class="text-muted">#{{article.id}}</span></a>
    </h4>
    {% if msg %}
    <div class="alert alert-success" role="alert">
      {{msg}}
    </div>
    {% endif %}
    <form class="" action="/edit_article/{{article.id}}" method="POST">
      {% csrf_token %}
      <div class="card">
        <hr class="m-0">
        <div class="card-body pb-2">
          <div class="form-group">
            <label class="form-label">Город</label>
            <select name='city' class="form-control" id="exampleFormControlSelect1">
              {% for city in article.cities_list %}
                <option value="{{city.id}}"
                 {% if city == article.city %}selected="selected"{% endif %}>
                 {{city.name}}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Категория</label>
            <select name='category' class="form-control" id="exampleFormControlSelect1">
              {% for category in article.categories_list %}
                <option value="{{category.id}}"
                 {% if category == article.category %}selected="selected"{% endif %}>
                 {{category.name}}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Источник</label>
            <select name='source' class="form-control" id="exampleFormControlSelect1">
              {% for source in article.sources_list %}
                <option value="{{source.id}}"
                 {% if source == article.source %}selected="selected"{% endif %}>
                 {{source.name}}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Участник</label>
            <select name='participants' multiple class="form-control" id="exampleFormControlSelect2">
              {% for participant in article.participants_list %}
                <option value="{{participant.id}}"
                 {% if participant in article.participants.all %}selected="selected"{% endif %}>
                 {{participant.name}}
                </option>
              {% endfor %}
            </select>
            <small id="passwordHelpBlock" class="form-text text-muted">
              Чтобы выбрать несколько вариантов зажмите SHIFT.
            </small>
          </div>

          <div class="form-group">
            <label class="form-label">Уровень</label>
            <select name='grade' class="form-control" id="exampleFormControlSelect2">
              {% for grade in article.grades_list %}
                <option value="{{grade.id}}"
                 {% if grade == article.grade %}selected="selected"{% endif %}>
                 {{grade.name}}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">Сфера</label>
            <input name='scope' type="text" class="form-control" value="{{article.scope}}">
          </div>

          <div class="form-group">
            <label class="form-label">Направления проектов</label>
            <input name='project_directions' type="text" class="form-control" value="{{article.project_directions}}">
          </div>

          <div class="form-group">
            <label class="form-label">Организация</label>
            <input name='organization' type="text" class="form-control" value="{{article.organization}}">
          </div>

          <div class="form-group">
            <label class="form-label">Наименование</label>
            <input name='name' type="text" class="form-control" value="{{article.name}}">
          </div>

          <div class="form-group">
            <label class="form-label">Цель финансирования</label>
            <input name='purpose' type="text" class="form-control" value="{{article.purpose}}">
          </div>

          <div class="form-group">
            <label class="form-label">Требования к участнику</label>
            <input name='requirements' type="text" class="form-control" value="{{article.requirements}}">
          </div>

          <div class="form-group">
            {{ post_form.media }}
            {{ post_form.as_p }}
          </div>

          <div class="form-group">
            <label class="form-label">Сумма</label>
            <input name='cost' type="text" class="form-control" value="{{article.cost}}">
          </div>

          <div class="form-group">
            <label class="form-label">Ссылка на Документы</label>
            <input name='link_to_documents' type="text" class="form-control" value="{{article.link_to_documents}}">
          </div>

          <div class="form-group">
            <label class="form-label">Ссылка на официальный источник</label>
            <input name='link_to_official' type="text" class="form-control" value="{{article.link_to_official}}">
          </div>

          <div class="form-group">
            <label class="form-label">Контакты организатора</label>
            <input name='contacts' type="text" class="form-control" value="{{article.contacts}}">
          </div>

          <div class="form-group">
            <label class="form-label">Ссылка НПА</label>
            <input name='link_to_npa' type="text" class="form-control" value="{{article.link_to_npa}}">
          </div>

          <div class="form-group">
            <label class="form-label">Статус</label>
            <select name='status' class="custom-select">
              <option {% if article.status == 'PUB'%} selected {% endif %} value='PUB'>Опубликовано</option>
              <option {% if article.status == 'EDT'%} selected {% endif %} value='EDT'>Редактируется</option>
              <option {% if article.status == 'DEL'%} selected {% endif %} value='DEL'>Удалено</option>
            </select>
          </div>
        </div>
      </div>

      <div class="text-right mt-3 mb-3">
        <button name='save_btn' type="submit" class="btn btn-primary">Сохранить изменения</button>&nbsp;
      </div>
    </form>

  </div>
</div>

{% endblock %}
